<!DOCTYPE html>
<html>
<head>
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
h1.wrap {
  display: flex;
  position: fixed;
  top: 1px;
  text-align: center;
  margin-bottom: 20px;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  font-size: 2rem;
  color: #333;
  gap: 5px;
}

h1.wrap span {
  display: inline-block;
  padding: 10px 20px;
  border-radius: 20px;
  background: linear-gradient(135deg, #4caf50, #81c784);
  color: white;
  border: none;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  transition: transform 0.2s, box-shadow 0.2s;
}

h1.wrap span:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 15px rgba(0,0,0,0.3);
}

  body {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: #f5f5f5;
    font-family: Arial, sans-serif;
  }

  .calculator {
    width: 100%;
    max-width: 400px;
    background: #fff;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.2);
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  #display {
    width: 100%;
    height: 60px;
    font-size: 1.5rem;
    padding: 10px;
    box-sizing: border-box;
    resize: none;
    border: 2px solid #ddd;
    border-radius: 10px;
    text-align: right;
  }

  .buttons {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
  }

  button {
    padding: 20px;
    font-size: 1.2rem;
    border: none;
    border-radius: 10px;
    background-color: #e0e0e0;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  button:hover {
    background-color: #d0d0d0;
  }

  button.operator {
    background-color: #ffb74d;
  }

  button.operator:hover {
    background-color: #ffa726;
  }

  @media (max-width: 600px) {
    button {
      padding: 15px;
      font-size: 1rem;
    }
    #display {
      height: 50px;
      font-size: 1.2rem;
    }
  }
</style>
</head>
<body>
<h1 class="wrap"><span>CALCULATOR</span></h1><br>
<div class="calculator">
  <textarea id="display" readonly></textarea>
  <div class="buttons">
    <button>7</button><button>8</button><button>9</button><button>/</button>
    <button>4</button><button>5</button><button>6</button><button>*</button>
    <button>1</button><button>2</button><button>3</button><button>-</button>
    <button>0</button><button>.</button><button>=</button><button>+</button>
    <button>(</button><button>)</button><button>^</button><button>√</button>
    <button>C</button><button>del</button>
  </div>
</div>
<script>
  const display = document.querySelector("textarea");
const buttons = document.querySelectorAll("button");
let currentInput = "";

// --- Button click logic ---
buttons.forEach(button => {
  button.addEventListener("click", () => {
    const value = button.textContent;

    if (value === "=") {
      try {
        const postfixExpr = infixToPostfix(currentInput);
        currentInput = evaluatePostfix(postfixExpr).toString();
      } catch {
        currentInput = "Error";
      }
    } else if (value === "C") {
      currentInput = "";
    } else if (value === "del") {
      currentInput = currentInput.slice(0, -1);
    } else if (value === "(" || value === ")") {
      currentInput += value;
    } else if (value === "^") {
      currentInput += "^";
    } else if (value === "√") {
      currentInput += "√"; // treat as unary operator
    } else {
      currentInput += value;
    }

    display.value = currentInput;
  });
});

// --- Postfix engine functions ---
function isOperator(c) {
  return ['+', '-', '*', '/', '^'].includes(c);
}

function priority(op) {
  if (op === '+' || op === '-') return 1;
  if (op === '*' || op === '/') return 2;
  if (op === '^') return 3;
  if (op === '√') return 4; // highest priority
  return 0;
}

function isRightAssociative(op) {
  return op === '^' || op === '√';
}

function infixToPostfix(expr) {
  let stack = [];
  let postfix = [];
  let i = 0;

  while (i < expr.length) {
    let c = expr[i];

    if (c === ' ') { i++; continue; }

    // Multi-digit or decimal numbers
    if (!isNaN(c) || c === '.') {
      let num = '';
      while (i < expr.length && (!isNaN(expr[i]) || expr[i] === '.')) {
        num += expr[i++];
      }
      postfix.push(num);
      continue;
    }

    // √ operator
    if (c === '√') {
      stack.push('√');
      i++;
      continue;
    }

    // Parentheses
    if (c === '(') {
      stack.push(c);
    } else if (c === ')') {
      while (stack.length && stack[stack.length-1] !== '(') {
        postfix.push(stack.pop());
      }
      stack.pop(); // remove '('
    } else if (isOperator(c)) {
      while (
        stack.length &&
        stack[stack.length-1] !== '(' &&
        (priority(stack[stack.length-1]) > priority(c) ||
         (priority(stack[stack.length-1]) === priority(c) && !isRightAssociative(c)))
      ) {
        postfix.push(stack.pop());
      }
      stack.push(c);
    }

    i++;
  }

  while (stack.length) {
    postfix.push(stack.pop());
  }

  return postfix;
}

function evaluatePostfix(postfix) {
  let stack = [];

  for (let token of postfix) {
    if (!isNaN(token)) {
      stack.push(parseFloat(token));
    } else if (token === '√') {
      let a = stack.pop();
      stack.push(Math.sqrt(a));
    } else {
      let b = stack.pop() ?? 0;
      let a = stack.pop() ?? 0;
      switch(token) {
        case '+': stack.push(a+b); break;
        case '-': stack.push(a-b); break;
        case '*': stack.push(a*b); break;
        case '/': stack.push(a/b); break;
        case '^': stack.push(Math.pow(a,b)); break;
      }
    }
  }

  return stack.pop();
}
</script>
</body>

</html>



